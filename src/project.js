window.__require=function t(o,i,n){function e(h,r){if(!i[h]){if(!o[h]){var c=h.split("/");if(c=c[c.length-1],!o[c]){var d="function"==typeof __require&&__require;if(!r&&d)return d(c,!0);if(s)return s(c,!0);throw new Error("Cannot find module '"+h+"'")}h=c}var u=i[h]={exports:{}};o[h][0].call(u.exports,function(t){return e(o[h][1][t]||t)},u,u.exports,t,o,i,n)}return i[h].exports}for(var s="function"==typeof __require&&__require,h=0;h<n.length;h++)e(n[h]);return e}({Brush:[function(t,o,i){"use strict";cc._RF.push(o,"ef99byjjfFMiogEKISdm6pl","Brush"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.ctx=this.node.getComponent(cc.Graphics)},setBrushPos:function(t,o){this.ctx.moveTo(t,o)},setBrushLineWidth:function(t){this.ctx.lineWidth=t},setBrushColor:function(t){this.ctx.strokeColor=t,this.ctx.fillColor=t},drawTo:function(t,o){this.ctx.lineTo(t,o),this.ctx.stroke(),this.ctx.moveTo(t,o)},clear:function(){this.ctx.clear()}}),cc._RF.pop()},{}],HelloWorld:[function(t,o,i){"use strict";cc._RF.push(o,"280c3rsZJJKnZ9RqbALVwtK","HelloWorld"),cc.Class({extends:cc.Component,properties:{brush:cc.Node,path1:cc.Node,path2:cc.Node,part1:cc.Node,part2:cc.Node,wrongsound:{default:null,type:cc.AudioClip},win1sound:{default:null,type:cc.AudioClip},win2sound:{default:null,type:cc.AudioClip}},onLoad:function(){cc.debug.setDisplayStats(!1),this.lineWidth=1,this.color=cc.Color.Red,this.node.on("touchstart",this.onTouchStart,this),this.node.on("touchmove",this.onTouchMove,this),this.node.on("touchend",this.onTouchEnd,this),this.nowindex=0,this.path1ok=!1,this.path2ok=!1,this.pathnode1=this.path1.children,this.pathnode2=this.path2.children,this.nowpathnode=this.pathnode1,this.endok=!1,this.olddis=0,this.radius=40,this.end=!1,this.partindex=0,this.writeover=!1},onTouchStart:function(t){if(!this.writeover){var o=this.node.convertToNodeSpaceAR(t.getLocation());this.brush.getComponent("Brush").setBrushPos(o.x,o.y)}this.end=!1,this.endok=!1},onTouchMove:function(t){if(!this.writeover){var o=this.node.convertToNodeSpaceAR(t.getLocation());if(this.brush.getComponent("Brush").drawTo(o.x,o.y),!this.endok){var i,n;if(this.end)o.sub(this.nowpathnode[this.nowindex].getPosition()).mag()>this.radius&&(console.log("\u8d85\u8fc7\u6700\u540e\u4e00\u4e2a\u70b9"),this.endok=!1);else o.sub(this.nowpathnode[this.nowindex+1].getPosition()).mag()<this.radius&&(this.nowindex++,this.nowindex>=this.nowpathnode.length-1&&(console.log("\u5230\u7ed3\u5c3e\u4e86"),this.nowindex=this.nowpathnode.length-1,this.end=!0,this.endok=!0));if(!this.end)this.nowindex==this.nowpathnode.length-1?(console.log("========"),i=this.nowpathnode[this.nowindex].getPosition(),n=this.nowpathnode[this.nowindex].getPosition()):(i=this.nowpathnode[this.nowindex].getPosition(),n=this.nowpathnode[this.nowindex+1].getPosition()),this.lineInRound(i,n,o,this.radius)||(console.log("\u504f\u79bb"),this.endok=!1)}}},onTouchEnd:function(t){this.writeover||(this.brush.getComponent("Brush").clear(),this.nowindex=0,this.endok?(this.nowpathnode=this.pathnode2,0==this.partindex?(this.part1.active=!0,cc.audioEngine.playEffect(this.win1sound,!1)):1==this.partindex&&(this.part2.active=!0,this.writeover=!0,cc.audioEngine.playEffect(this.win2sound,!1)),this.partindex++):cc.audioEngine.playEffect(this.wrongsound,!1))},lineInRound:function(t,o,i,n){var e,s,h,r,c,d,u=(t.x-i.x)*(t.x-i.x)+(t.y-i.y)*(t.y-i.y)<=n*n,a=(o.x-i.x)*(o.x-i.x)+(o.y-i.y)*(o.y-i.y)<=n*n;return(!u||!a)&&(!(!u&&!a)||(e=t.y-o.y,s=o.x-t.x,h=t.x*o.y-o.x*t.y,r=e*i.x+s*i.y+h,!((r*=r)>(e*e+s*s)*n*n)&&(c=(i.x-t.x)*(o.x-t.x)+(i.y-t.y)*(o.y-t.y),d=(i.x-o.x)*(t.x-o.x)+(i.y-o.y)*(t.y-o.y),c>0&&d>0)))},clearGraphics:function(){this.brush.getComponent("Brush").clear()},reset:function(){this.brush.getComponent("Brush").clear(),this.nowindex=0,this.nowpathnode=this.pathnode1,this.writeover=!1,this.part1.active=!1,this.part2.active=!1,this.partindex=0}}),cc._RF.pop()},{}]},{},["Brush","HelloWorld"]);